[gd_scene load_steps=22 format=3]

[ext_resource type="Script" path="res://scripts/subarea.gd" id="1"]
[ext_resource type="Script" path="res://scripts/res_music_stem.gd" id="2"]
[ext_resource type="AudioStream" uid="uid://ta7fucycokhn" path="res://audio/floral_fury.mp3" id="3"]
[ext_resource type="Script" path="res://scripts/background.gd" id="4"]
[ext_resource type="Material" uid="uid://wjwno7j1mac1" path="res://asset/level/skybox/mat/sm_feverish2.tres" id="5"]
[ext_resource type="Environment" uid="uid://qkqvav71a2j2" path="res://asset/environment/env_bg.tres" id="6"]
[ext_resource type="CameraAttributesPractical" uid="uid://c6mnym7nlyfh8" path="res://asset/environment/cap_bg.tres" id="7"]
[ext_resource type="Script" path="res://scripts/background_cam.gd" id="8"]
[ext_resource type="Shader" path="res://asset/shader/n64_lit.gdshader" id="9"]
[ext_resource type="Texture2D" uid="uid://ccjkkc6wvrhra" path="res://asset/level/generic/tile_3.png" id="10"]
[ext_resource type="Script" path="res://scripts/warp_point.gd" id="11"]
[ext_resource type="Script" path="res://scripts/death_plane.gd" id="12"]
[ext_resource type="PackedScene" uid="uid://cesfcr0jo6gj8" path="res://scenes/prefab/flower_boss.tscn" id="13"]

[sub_resource type="Resource" id="1"]
script = ExtResource( "2" )
stream = ExtResource( "3" )
tag = ""
category = 1
always_restart = false
pitch = 1.0
volume = -4.0
fade = Vector2(1, 1)
channel = 0

[sub_resource type="ProceduralSkyMaterial" id="2"]
sky_top_color = Color(0.380392, 0.305882, 0.737255, 1)
sky_horizon_color = Color(0.556863, 0.737255, 0.898039, 1)
sky_curve = 0.109806
ground_bottom_color = Color(0.744301, 0.849874, 0.946492, 1)
ground_horizon_color = Color(0.555326, 0.735623, 0.896689, 1)
ground_curve = 0.259921
sun_angle_max = 0.0
use_debanding = false
script = null

[sub_resource type="Sky" id="3"]
sky_material = SubResource( "2" )
script = null

[sub_resource type="Environment" id="4"]
background_mode = 3
background_canvas_max_layer = -127
sky = SubResource( "3" )
ambient_light_source = 3
ambient_light_sky_contribution = 0.15
reflected_light_source = 2
tonemap_mode = 3
tonemap_exposure = 1.2
ssao_radius = 1.08
ssao_intensity = 0.0
ssao_sharpness = 0.89
ssil_intensity = 0.0
fog_light_color = Color(0.741176, 0.764706, 0.803922, 1)
volumetric_fog_density = 0.0165
volumetric_fog_albedo = Color(0.933594, 0.601563, 0.667969, 1)
volumetric_fog_anisotropy = 0.9
volumetric_fog_ambient_inject = 1.19
adjustment_saturation = 8.0
script = null

[sub_resource type="ArrayMesh" id="5"]
_surfaces = [{
"aabb": AABB(-2, -1, 0, 4, 2.00001, 1e-05),
"attribute_data": PackedByteArray(0, 0, 0, 192, 0, 0, 128, 191, 0, 0, 0, 64, 0, 0, 128, 191, 0, 0, 0, 192, 0, 0, 0, 0, 0, 0, 0, 64, 0, 0, 128, 191, 0, 0, 0, 64, 0, 0, 0, 0, 0, 0, 0, 192, 0, 0, 0, 0),
"format": 34359738385,
"primitive": 3,
"uv_scale": Vector4(0, 0, 0, 0),
"vertex_count": 6,
"vertex_data": PackedByteArray(0, 0, 0, 192, 0, 0, 128, 63, 0, 0, 0, 0, 0, 0, 0, 64, 0, 0, 128, 63, 0, 0, 0, 0, 0, 0, 0, 192, 0, 0, 128, 191, 0, 0, 0, 0, 0, 0, 0, 64, 0, 0, 128, 63, 0, 0, 0, 0, 0, 0, 0, 64, 0, 0, 128, 191, 0, 0, 0, 0, 0, 0, 0, 192, 0, 0, 128, 191, 0, 0, 0, 0)
}]
script = null

[sub_resource type="ShaderMaterial" id="6"]
render_priority = 0
next_pass = null
shader = ExtResource( "9" )
shader_parameter/modulate_color = Color(1, 1, 1, 1)
shader_parameter/normal_scale = null
shader_parameter/uv_scale = Vector2(10, 10)
shader_parameter/uv_offset = Vector2(0, 0)
shader_parameter/uv_pan_velocity = Vector2(0, 0)
shader_parameter/albedoTex = ExtResource( "10" )
shader_parameter/texture_normal = null
script = null

[sub_resource type="QuadMesh" id="7"]
material = SubResource( "6" )
size = Vector2(200, 200)
orientation = 1
script = null

[sub_resource type="BoxShape3D" id="8"]
size = Vector3(1000, 10, 1000)
script = null

[node name="0" type="Node3D"]
script = ExtResource( "1" )
music = [SubResource( "1" )]
reload_on_death = true

[node name="sun" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.15442, 0.802864, -0.575816, -0.561807, 0.550767, 0.617275, 0.812728, 0.228178, 0.536104, 15.2367, 3.0656, -1.46723)
light_color = Color(0.744991, 0.392279, 0.588174, 1)
light_energy = 0.7
light_bake_mode = 1
shadow_bias = 0.05
shadow_normal_bias = 3.5
directional_shadow_mode = 0
directional_shadow_blend_splits = true
directional_shadow_max_distance = 800.0

[node name="sun_2" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.0162691, -0.178238, 0.983853, 0.234652, 0.957183, 0.169526, -0.971943, 0.228105, 0.0573964, 15.2367, 3.0656, -1.46723)
light_color = Color(0.992172, 0.678553, 0.415717, 1)
light_energy = 0.7
light_bake_mode = 1
shadow_bias = 0.05
shadow_normal_bias = 3.5
directional_shadow_mode = 0
directional_shadow_blend_splits = true
directional_shadow_max_distance = 800.0

[node name="environment" type="WorldEnvironment" parent="."]
environment = SubResource( "4" )

[node name="background" type="CanvasLayer" parent="."]
process_mode = 3
layer = -128
script = ExtResource( "4" )
bg_material = ExtResource( "5" )

[node name="@SubViewportContainer@25320" type="SubViewportContainer" parent="background"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
stretch = true

[node name="@SubViewport@25321" type="SubViewport" parent="background/@SubViewportContainer@25320"]
own_world_3d = true
handle_input_locally = false
msaa_3d = 2
size = Vector2i(640, 480)
render_target_update_mode = 4

[node name="@MeshInstance3D@25322" type="MeshInstance3D" parent="background/@SubViewportContainer@25320/@SubViewport@25321"]
material_overlay = ExtResource( "5" )
mesh = SubResource( "5" )

[node name="@Camera3D@25323" type="Camera3D" parent="background/@SubViewportContainer@25320/@SubViewport@25321"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0.1)
environment = ExtResource( "6" )
attributes = ExtResource( "7" )
projection = 1
size = 0.7
script = ExtResource( "8" )

[node name="level" type="Node" parent="."]

[node name="csg_box_3d" type="CSGMesh3D" parent="level"]
use_collision = true
collision_mask = 0
mesh = SubResource( "7" )

[node name="warp" type="Node" parent="."]

[node name="warp_point" type="Marker3D" parent="warp" groups=[
"Warp",
]]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 0, 20, 70.5)
gizmo_extents = 2.5
script = ExtResource( "11" )

[node name="entity" type="Node" parent="."]

[node name="death_plane" type="Area3D" parent="entity"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -100, 0)
script = ExtResource( "12" )

[node name="collision_shape_3d" type="CollisionShape3D" parent="entity/death_plane"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 47.5, 0)
shape = SubResource( "8" )

[node name="flower_boss" parent="entity" instance=ExtResource( "13" )]
