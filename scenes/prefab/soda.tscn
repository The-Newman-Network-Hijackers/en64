[gd_scene load_steps=28 format=3]

[ext_resource type="Script" path="res://scripts/soda.gd" id="1"]
[ext_resource type="PackedScene" path="res://asset/entity/soda/soda.blend.scn" id="2"]
[ext_resource type="Texture2D" uid="uid://dn70rg7oj8p0o" path="res://asset/effect/sparkle/sparkle.png" id="3"]
[ext_resource type="Texture2D" uid="uid://ccpmqq7i3566a" path="res://asset/effect/splash/bubble.png" id="4"]
[ext_resource type="AudioStream" uid="uid://bb41ybd17nb53" path="res://audio/sfx/soda_heal.wav" id="5"]

[sub_resource type="SphereShape3D" id="1"]
radius = 4.0
script = null

[sub_resource type="Animation" id="2"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("vis:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(1.59864e-14, -1.74846e-07, 0.436332)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("sparkle:emitting")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}
script = null

[sub_resource type="Animation" id="3"]
resource_name = "idle"
length = 2.0
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("vis:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 2),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector3(1.59864e-14, -1.74846e-07, 0.436332), Vector3(0, -6.28319, 0.436332)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("sparkle:emitting")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}
script = null

[sub_resource type="AnimationLibrary" id="4"]
_data = {
"RESET": SubResource( "2" ),
"idle": SubResource( "3" )
}
script = null

[sub_resource type="StandardMaterial3D" id="5"]
transparency = 1
shading_mode = 0
diffuse_mode = 1
vertex_color_use_as_albedo = true
albedo_texture = ExtResource( "3" )
texture_filter = 2
billboard_mode = 3
billboard_keep_scale = true
particles_anim_h_frames = 2
particles_anim_v_frames = 3
particles_anim_loop = false
script = null

[sub_resource type="Curve" id="6"]
max_value = 2.0
_data = [Vector2(0, 1.2973), 0.0, -8.44541, 0, 0, Vector2(0.0752688, 1), 0.0, 0.0, 0, 0, Vector2(0.430108, 0.986486), 0.0, 0.0, 0, 0, Vector2(1, 0), 0.0, 0.0, 0, 0]
point_count = 4
script = null

[sub_resource type="CurveTexture" id="7"]
curve = SubResource( "6" )
script = null

[sub_resource type="Gradient" id="8"]
offsets = PackedFloat32Array(0, 0.348837)
colors = PackedColorArray(0.274975, 0.580716, 0.999992, 1, 1, 1, 1, 1)
script = null

[sub_resource type="GradientTexture1D" id="9"]
gradient = SubResource( "8" )
script = null

[sub_resource type="ParticleProcessMaterial" id="10"]
emission_shape = 1
emission_sphere_radius = 4.0
gravity = Vector3(0, 0, 0)
scale_curve = SubResource( "7" )
color_ramp = SubResource( "9" )
anim_speed_min = 1.25
anim_speed_max = 1.25
script = null

[sub_resource type="QuadMesh" id="11"]
size = Vector2(1.5, 1.5)
script = null

[sub_resource type="StandardMaterial3D" id="12"]
transparency = 1
shading_mode = 0
vertex_color_use_as_albedo = true
albedo_texture = ExtResource( "4" )
script = null

[sub_resource type="Curve" id="13"]
max_value = 3.0
_data = [Vector2(0, 3), 0.0, 0.0, 0, 0, Vector2(1, 0.547297), 0.0, 0.0, 0, 0]
point_count = 2
script = null

[sub_resource type="Curve" id="14"]
max_value = 3.0
_data = [Vector2(0, 0.385135), 0.0, 0.0, 0, 0, Vector2(1, 2.51351), 0.0, 0.0, 0, 0]
point_count = 2
script = null

[sub_resource type="Curve" id="15"]
max_value = 3.0
_data = [Vector2(0, 1), 0.0, 0.0, 0, 0, Vector2(1, 1), 0.0, 0.0, 0, 0]
point_count = 2
script = null

[sub_resource type="CurveXYZTexture" id="16"]
curve_x = SubResource( "13" )
curve_y = SubResource( "14" )
curve_z = SubResource( "15" )
script = null

[sub_resource type="Gradient" id="17"]
offsets = PackedFloat32Array(0.0784884, 0.793605)
colors = PackedColorArray(1, 1, 1, 1, 0.233925, 0.233925, 0.233925, 1)
script = null

[sub_resource type="GradientTexture1D" id="18"]
gradient = SubResource( "17" )
script = null

[sub_resource type="Curve" id="19"]
_data = [Vector2(0, 1), 0.0, 0.0, 0, 0, Vector2(0.596774, 1), 0.0, 0.0, 0, 0, Vector2(1, 0), 0.0, 0.0, 0, 0]
point_count = 3
script = null

[sub_resource type="CurveTexture" id="20"]
curve = SubResource( "19" )
script = null

[sub_resource type="ParticleProcessMaterial" id="21"]
direction = Vector3(0, 1, 0)
initial_velocity_min = 17.0
initial_velocity_max = 17.0
gravity = Vector3(0, -24, 0)
scale_over_velocity_min = 64.9
scale_over_velocity_max = 90.75
scale_over_velocity_curve = SubResource( "16" )
color = Color(0.509804, 0.305882, 0.184314, 1)
color_ramp = SubResource( "18" )
alpha_curve = SubResource( "20" )
script = null

[sub_resource type="RibbonTrailMesh" id="22"]
shape = 0
size = 0.6
sections = 4
section_length = 0.4
script = null

[node name="soda" type="Area3D"]
collision_layer = 0
collision_mask = 2
monitorable = false
script = ExtResource( "1" )

[node name="vis" parent="." instance=ExtResource( "2" )]
transform = Transform3D(0.906308, -0.422618, -1.74846e-07, 0.422618, 0.906308, -1.59864e-14, 1.58464e-07, -7.38931e-08, 1, 0, 3.5, 0)
metadata/_edit_lock_ = true

[node name="col" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 3.91819, 0.0240417)
shape = SubResource( "1" )
metadata/_edit_lock_ = true

[node name="anim" type="AnimationPlayer" parent="."]
libraries = {
"": SubResource( "4" )
}
autoplay = "idle"

[node name="sparkle" type="GPUParticles3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 3.9, 0)
material_override = SubResource( "5" )
emitting = false
amount = 5
lifetime = 0.7
visibility_aabb = AABB(-4.48035, -3.10728, -4.58884, 8.40027, 8.06036, 9.69584)
process_material = SubResource( "10" )
draw_pass_1 = SubResource( "11" )
metadata/_edit_lock_ = true

[node name="external_effect" type="Node3D" parent="."]

[node name="soda" type="GPUParticles3D" parent="external_effect"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.8, 0)
material_override = SubResource( "12" )
emitting = false
lifetime = 2.0
one_shot = true
explosiveness = 1.0
visibility_aabb = AABB(-24.7637, -25.8161, -24.1349, 43.0925, 32.9359, 48.0371)
transform_align = 3
process_material = SubResource( "21" )
draw_pass_1 = SubResource( "22" )
metadata/_edit_lock_ = true

[node name="open" type="AudioStreamPlayer3D" parent="external_effect"]
stream = ExtResource( "5" )
attenuation_model = 3
unit_size = 60.0
max_db = 0.0
bus = &"Sound"
